<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cancer & Leo: Eternal Bond</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    html, body {
      height: 100%; margin: 0; padding: 0;
      background: #0a1026; color: #fff;
      font-family: 'Segoe UI', Arial, sans-serif;
      overflow-x: hidden;
    }
    .page {
      position: absolute; top: 0; left: 0; width: 100vw; height: 100vh;
      display: flex; flex-direction: column; justify-content: center; align-items: center;
      opacity: 0; pointer-events: none; transition: opacity 0.7s;
      background: rgba(10,16,38,0.97);
      z-index: 1;
    }
    .page.active {
      opacity: 1; pointer-events: auto; z-index: 10;
    }
    .caption {
      margin-top: 36px; font-size: 1.2em; text-align: center; max-width: 94vw;
    }
    .nav-btn {
      background: none; outline: none; border: none; cursor: pointer;
      margin-top: 50px;
      font-size: 1.36em; color: #fff;
      transition: transform 0.15s;
      z-index: 10;
      display: flex; flex-direction: column; align-items: center;
      position: relative;
    }
    .nav-btn .burst {
      animation: burst 0.5s;
    }
    @keyframes burst {
      0% { filter: drop-shadow(0 0 0 #fff); opacity: 1; }
      70% { filter: drop-shadow(0 0 48px #fff); opacity: 0.8;}
      100% { opacity: 0; transform: scale(2);}
    }

    /* PAGE 1: STARS */
    #stars-canvas { position: absolute; top: 0; left: 0; z-index: 0;}
    .star-center {
      font-size: 4.5em; color: #fffde4;
      animation: star-grow 1.1s cubic-bezier(.4,2,.6,1) forwards;
      filter: drop-shadow(0 0 16px #fff9);
    }
    @keyframes star-grow {
      0% { transform: scale(0.15); opacity: 0;}
      50% { transform: scale(1.3); opacity: 1;}
      100% { transform: scale(1);}
    }

    /* PAGE 2: Zodiac */
    .zodiac-merge { width: 180px; height: 180px; display:flex; align-items:center; justify-content:center; position:relative;}
    .zod { font-size: 3.7em; position: absolute; transition: transform 1.2s, opacity 1.2s;}
    .cancer { left: 0; color: #79eaff;}
    .leo { right: 0; color: #ffb347;}
    .merged { opacity: 0; font-size: 3em; color: gold; left: 50%; top: 50%; transform: translate(-50%, -50%) scale(0.2); transition: all 1.2s; position: absolute;}
    .merged.visible { opacity: 1; transform: translate(-50%, -50%) scale(1.12); filter: drop-shadow(0 0 20px gold);}
    .zodiac-caption { margin-top: 36px; font-size: 1.15em; text-align: center; max-width:85vw;}

    /* PAGE 3: Infinity & Heart */
    .infinity-wrap { position: relative; margin-top: 30px; }
    .infinity-sign {
      font-size: 4.5em; color: #ffb347;
      filter: drop-shadow(0 0 18px #ffb34799);
      animation: inf-pulse 1.5s infinite alternate;
    }
    @keyframes inf-pulse {
      from { transform: scale(1);}
      to { transform: scale(1.11);}
    }
    .heart-center {
      position: absolute; left:50%; top:49%; transform:translate(-50%,-50%);
      font-size: 2.8em; color: #ff80ab; filter: drop-shadow(0 0 12px #ff80ab99);
      animation: heart-pulse 1.2s infinite alternate;
    }
    @keyframes heart-pulse {
      from { transform:translate(-50%,-50%) scale(1);}
      to { transform:translate(-50%,-50%) scale(1.13);}
    }

    /* PAGE 4: Photo Gallery */
    .gallery { display:flex; flex-wrap:wrap; justify-content:center; gap:12px; margin:38px 0 12px 0; max-width:97vw; }
    .gallery-img {
      width: 110px; height: 110px; object-fit:cover; border-radius: 16px;
      border: 2.5px solid #ffb34744; box-shadow: 0 2px 10px #2227;
      transition: transform 0.25s, box-shadow 0.25s;
      cursor: pointer;
      background: #222;
    }
    .gallery-img:hover { transform: scale(1.05); box-shadow:0 8px 24px #ffb34744;}
    .gallery-caption { margin-top: 22px; font-size: 1.08em; }
    /* Fullscreen image modal */
    .img-modal { display:none; position:fixed; z-index:200; left:0;top:0;width:100vw;height:100vh;background:rgba(10,16,38,0.96); justify-content:center;align-items:center;}
    .img-modal.open { display:flex; }
    .img-modal img { max-width:92vw; max-height:84vh; border-radius:22px; box-shadow:0 8px 48px #ffb34744;}
    .img-modal .close-img-btn { position:absolute;top:18px;right:30px;background:#ffb347;border:none;border-radius:50%;width:36px;height:36px;color:#fff;font-size:1.4em;cursor:pointer;}

    /* PAGE 5: Scrapbook */
    .scrap-title { font-size: 1.35em; font-weight: 600; margin-top: 28px; }
    .scrapbook-grid { display: flex; flex-wrap: wrap; justify-content: center; gap: 14px; margin-top: 36px; max-width: 98vw; overflow-y: auto; height: 64vh;}
    .scrap-img { width: 92px; height: 92px; object-fit: cover; border-radius: 14px; box-shadow: 0 2px 8px #2228; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; border: 2px solid #ffb34744;}
    .scrap-img:hover { transform: scale(1.07); box-shadow: 0 4px 16px #ffb34766; }
    /* Love Letter Modal */
    .letter-modal { display: none; position: fixed; z-index: 100; top:0; left:0; width:100vw; height:100vh; justify-content: center; align-items: center; background: rgba(10,16,38,0.82); animation: fadeIn 0.8s;}
    .letter-modal.open { display: flex;}
    .letter-card { background: #fffbe9; color: #3c243b; border-radius: 22px; padding: 32px 22px 28px 22px; max-width: 90vw; box-shadow: 0 8px 48px #ffb34744; text-align: center; font-size: 1.12em; position: relative; min-width: 260px; min-height: 160px; overflow: hidden; animation: letterOpen 0.9s cubic-bezier(.33,1.5,.36,1);}
    @keyframes letterOpen { 0% { transform: scale(0.7) rotateX(-40deg); opacity: 0;} 60% { transform: scale(1.08) rotateX(6deg); opacity: 1;} 100% { transform: scale(1) rotateX(0deg);} }
    @keyframes fadeIn { from { opacity: 0;} to { opacity: 1;} }
    .close-btn { position: absolute; top: 10px; right: 16px; background: #ffb347; border: none; border-radius: 50%; width: 32px; height: 32px; color: #fff; font-size: 1.4em; cursor: pointer; box-shadow: 0 2px 6px #2224; transition: background 0.2s;}
    .close-btn:hover { background: #ff80ab; }
    /* Floating Hearts Animation */
    .hearts-area { position: absolute; top:0; left:0; width:100%; height:100%; pointer-events: none; z-index: 2;}
    .heart { position: absolute; font-size: 2em; opacity: 0.7; animation: floatHeart 2.8s linear forwards; color: #ff80ab; filter: drop-shadow(0 0 8px #ffb34766);}
    @keyframes floatHeart { from { transform: translateY(0) scale(1);} to { transform: translateY(-220px) scale(1.5); opacity: 0;} }
    /* Audio */
    audio { display: none; }
    @media (max-width: 600px) {
      .scrap-img, .gallery-img { width: 68px; height: 68px;}
      .letter-card { padding: 18px 8px 12px 8px; min-width: 180px;}
    }
  </style>
</head>
<body>
  <!-- Background Music -->
  <audio id="bg-music" src="https://files.catbox.moe/qo3n3e.mp3" loop autoplay></audio>

  <!-- PAGE 1: Starry Night -->
  <div class="page active" id="page1">
    <canvas id="stars-canvas"></canvas>
    <div class="caption" style="z-index:2;">Written in the stars, our journey is eternal...</div>
    <button class="nav-btn" id="star-btn" style="display:none;">
      <span id="star-center" class="star-center">‚≠ê</span>
      <span style="margin-top:10px;">Tap on me</span>
    </button>
  </div>

  <!-- PAGE 2: Zodiac Merge -->
  <div class="page" id="page2">
    <div class="zodiac-merge">
      <span class="zod cancer" id="cancer">&#9803;</span>
      <span class="zod leo" id="leo">&#9804;</span>
      <span class="merged" id="merged-zod">&#10084;&#65039;</span>
    </div>
    <div class="zodiac-caption">Cancer & Leo: Lovers beyond lifetimes, our energies merge, shining ever brighter.</div>
    <button class="nav-btn" id="zodiac-btn" style="display:none;"><span>‚ú® Tap for next ‚ú®</span></button>
  </div>

  <!-- PAGE 3: Infinity & Heart -->
  <div class="page" id="page3">
    <div class="infinity-wrap">
      <div class="infinity-sign">&#8734;</div>
      <div class="heart-center">üíû</div>
    </div>
    <div class="caption">Our love is infinite, looping through every lifetime, always finding each other.</div>
    <button class="nav-btn" id="infinity-btn" style="display:none;">Continue</button>
  </div>

  <!-- PAGE 4: Romantic Gallery -->
  <div class="page" id="page4">
    <div style="font-size:1.25em; font-weight:600; margin-top:16px;">A Gallery of Our Love</div>
    <div class="gallery" id="gallery"></div>
    <div class="gallery-caption">Each memory a star, glowing in our sky.</div>
    <button class="nav-btn" id="gallery-btn" style="display:none;">Scrapbook & Letters</button>
    <!-- Fullscreen Image Modal -->
    <div class="img-modal" id="img-modal">
      <img id="modal-img" src="" alt="Memory">
      <button class="close-img-btn" id="close-img-btn">&times;</button>
    </div>
  </div>

  <!-- PAGE 5: Scrapbook with Love Letters -->
  <div class="page" id="page5">
    <div class="scrap-title">Our Scrapbook of Love</div>
    <div class="scrapbook-grid" id="scrapbook-grid"></div>
    <div class="caption">Tap a memory to read a love letter‚Ä¶</div>
    <!-- Love Letter Modal -->
    <div class="letter-modal" id="letter-modal">
      <div class="letter-card" id="letter-card">
        <button class="close-btn" id="close-letter">&times;</button>
        <div id="letter-text"></div>
        <div class="hearts-area" id="hearts-area"></div>
      </div>
    </div>
  </div>

  <script>
    // MUSIC: ensure autoplay works after user gesture (esp. on mobile)
    document.body.addEventListener('touchstart', () => {
      document.getElementById('bg-music').play();
    }, {once:true});
    document.body.addEventListener('mousedown', () => {
      document.getElementById('bg-music').play();
    }, {once:true});

    // PAGE MANAGEMENT
    let currentPage = 1;
    function showPage(n) {
      document.querySelectorAll('.page').forEach((p,i) => {
        p.classList.toggle('active', i === n-1);
      });
      currentPage = n;
    }

    // PAGE 1: STAR ANIMATION
    function createStars() {
      const canvas = document.getElementById('stars-canvas');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      const ctx = canvas.getContext('2d');
      let stars = [];
      for(let i=0;i<100;i++) {
        stars.push({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, r: Math.random()*1.5+0.4, o: Math.random()*0.5+0.5 });
      }
      function draw() {
        ctx.clearRect(0,0,canvas.width,canvas.height);
        for(const s of stars) {
          ctx.globalAlpha = s.o;
          ctx.beginPath(); ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
          ctx.fillStyle = "#fff"; ctx.fill();
        }
      }
      draw();
      // Animate: one star to center and grow
      setTimeout(() => {
        let cx = canvas.width/2, cy = canvas.height/2;
        let sx = stars[0].x, sy = stars[0].y;
        let grow = 0.8;
        let anim = setInterval(()=>{
          sx += (cx - sx) * 0.13;
          sy += (cy - sy) * 0.13;
          grow += 0.11;
          draw();
          ctx.globalAlpha = 1;
          ctx.beginPath();
          ctx.arc(sx,sy,18*grow,0,Math.PI*2);
          ctx.fillStyle = "#fffde4";
          ctx.shadowBlur = 22;
          ctx.shadowColor = "#fffde4";
          ctx.fill();
          ctx.shadowBlur = 0;
        }, 30);
        setTimeout(() => {
          clearInterval(anim);
          document.getElementById('star-btn').style.display = '';
        }, 1800);
      }, 1200);
    }
    createStars();

    // PAGE 1: Button tap, burst, next page
    document.getElementById('star-btn').addEventListener('click', function() {
      let star = document.getElementById('star-center');
      star.classList.add('burst');
      setTimeout(() => {
        showPage(2);
        setTimeout(animateZodiac, 400);
      }, 480);
    });

    // PAGE 2: Zodiac merge
    function animateZodiac() {
      let cancer = document.getElementById('cancer');
      let leo = document.getElementById('leo');
      let merged = document.getElementById('merged-zod');
      cancer.style.transform = 'translateX(70px)';
      leo.style.transform = 'translateX(-70px)';
      setTimeout(() => {
        cancer.style.opacity = '0';
        leo.style.opacity = '0';
        merged.classList.add('visible');
        setTimeout(() => {
          document.getElementById('zodiac-btn').style.display = '';
        }, 800);
      }, 1200);
    }
    document.getElementById('zodiac-btn').addEventListener('click', function() {
      showPage(3);
      setTimeout(()=>{document.getElementById('infinity-btn').style.display='';}, 1200);
    });

    // PAGE 3: Infinity & heart
    document.getElementById('infinity-btn').addEventListener('click', function() {
      showPage(4);
      setTimeout(()=>{document.getElementById('gallery-btn').style.display='';}, 1400);
    });

    // PAGE 4: Gallery
    const galleryImages = [
      "https://i.ibb.co/1G5FWLMK/IMG-2256.jpg",
      "https://i.ibb.co/Vc8m0bYz/IMG-2251.jpg",
      "https://i.ibb.co/vCZQ92Wg/IMG-4083.jpg",
      "https://i.ibb.co/MFbcpns/IMG-2252.jpg",
      "https://i.ibb.co/DPwKfwVL/IMG-2258.jpg",
      "https://i.ibb.co/Hpxcw67v/IMG-4085.jpg",
      "https://i.ibb.co/dsQ1dY9P/IMG-4088.jpg",
      "https://i.ibb.co/Hf82JCpg/IMG-4089.jpg",
      "https://i.ibb.co/bySjLVz/939b3a43-cfeb-4486-a9b0-dc0daca955eb.jpg",
      "https://i.ibb.co/0j5t9PX7/98ba4001-e267-49c5-83e9-69a4979e1ed1.jpg",
      "https://i.ibb.co/qYDTCrRw/IMG-8586.jpg",
      "https://i.ibb.co/84BZV7Yx/3-FAA830-C-C295-4319-BEAA-A0-FEB5-BF62-AC.jpg",
      "https://i.ibb.co/0j2DPCmH/IMG-8587.jpg",
      "https://i.ibb.co/G47Wzv8j/IMG-8588.jpg",
      "https://i.ibb.co/wZvmRC2C/IMG-8843.jpg",
      "https://i.ibb.co/jvbkPVcB/IMG-2264.jpg",
      "https://i.ibb.co/Q367r5tW/IMG-2255.jpg",
      "https://i.ibb.co/4nTPpmZQ/IMG-2254.jpg",
      "https://i.ibb.co/jvrMb9FH/IMG-2263.jpg",
      "https://i.ibb.co/VWfMhxCS/IMG-2259.jpg",
      "https://i.ibb.co/HD2bK0Vv/IMG-2265.jpg",
      "https://i.ibb.co/5WRx6YDq/IMG-2266.jpg",
      "https://i.ibb.co/tp6zJsDj/IMG-3682.jpg",
      "https://i.ibb.co/7Jcmj22X/IMG-3716.jpg",
      "https://i.ibb.co/fGX91P8H/IMG-3713.jpg",
      "https://i.ibb.co/Fb83nb9Q/IMG-3718.jpg",
      "https://i.ibb.co/r2BNN3pd/IMG-1599.jpg",
      "https://i.ibb.co/npc9JH6/IMG-3721.jpg",
      "https://i.ibb.co/355SRZ0Z/74022-DD7-8-A77-499-B-AD48-B434418-A07-DF.png",
      "https://i.ibb.co/CKhgtwML/IMG-3722.jpg",
      "https://i.ibb.co/KpsGm4vX/IMG-3719.jpg",
      "https://i.ibb.co/WvTJngyF/IMG-3728.jpg"
    ];
    const galleryDiv = document.getElementById('gallery');
    galleryImages.forEach((src, i) => {
      const img = document.createElement('img');
      img.src = src; img.className = 'gallery-img'; img.alt = "Memory " + (i+1);
      img.addEventListener('click', ()=>openImgModal(src));
      galleryDiv.appendChild(img);
    });
    // Fullscreen image modal logic
    function openImgModal(src) {
      document.getElementById('modal-img').src = src;
      document.getElementById('img-modal').classList.add('open');
    }
    document.getElementById('close-img-btn').onclick = ()=>document.getElementById('img-modal').classList.remove('open');
    document.getElementById('img-modal').onclick = (e)=>{
      if (e.target === document.getElementById('img-modal')) document.getElementById('img-modal').classList.remove('open');
    }

    document.getElementById('gallery-btn').addEventListener('click', function() {
      showPage(5);
    });

    // PAGE 5: Scrapbook + Love Letters
    const scrapbook = [
      {
        img: "https://i.ibb.co/1G5FWLMK/IMG-2256.jpg",
        letter: "My dearest love, with every glance, my heart remembers a thousand lifetimes we‚Äôve spent together. I feel so blessed to have found you again in this one. <br><br>Forever yours, in every birth."
      },
      {
        img: "https://i.ibb.co/vCZQ92Wg/IMG-4083.jpg",
        letter: "You are my sun and my moon, my Cancer soul wrapped around my fierce Leo. We shine brightest together, painting the universe with our love."
      },
      {
        img: "https://i.ibb.co/DPwKfwVL/IMG-2258.jpg",
        letter: "Every memory with you is a star in our sky. Some nights I count them and realize‚Äîour love is infinite."
      },
      {
        img: "https://i.ibb.co/HD2bK0Vv/IMG-2265.jpg",
        letter: "I love you more with every moment, with every universe, with every heartbeat. Thank you for being my always."
      },
      {
        img: "https://i.ibb.co/Fb83nb9Q/IMG-3718.jpg",
        letter: "No distance, no time, no fate could ever keep us apart. Our bond is written in the stars and sealed by our hearts."
      },
      {
        img: "https://i.ibb.co/355SRZ0Z/74022-DD7-8-A77-499-B-AD48-B434418-A07-DF.png",
        letter: "Our love, like the infinity sign, loops through every lifetime. With you, forever is just the beginning."
      }
    ];
    // Populate scrapbook grid
    const grid = document.getElementById('scrapbook-grid');
    scrapbook.forEach((item, i) => {
      const img = document.createElement('img');
      img.src = item.img;
      img.className = "scrap-img";
      img.alt = "Memory " + (i+1);
      img.addEventListener('click', () => openLetter(i));
      grid.appendChild(img);
    });

    // Love Letter Modal logic
    const modal = document.getElementById('letter-modal');
    const letterText = document.getElementById('letter-text');
    const heartsArea = document.getElementById('hearts-area');
    let heartTimer = null;
    function openLetter(idx) {
      letterText.innerHTML = scrapbook[idx].letter;
      modal.classList.add('open');
      startHearts();
    }
    document.getElementById('close-letter').onclick = closeLetter;
    function closeLetter() {
      modal.classList.remove('open');
      stopHearts();
    }
    // Floating Hearts Animation
    function random(min, max) { return Math.random() * (max-min) + min; }
    function spawnHeart() {
      const heart = document.createElement('span');
      heart.className = 'heart';
      heart.textContent = 'üíñ';
      heart.style.left = random(10, 80) + '%';
      heart.style.bottom = '-36px';
      heart.style.fontSize = random(1.3, 2.2) + 'em';
      heart.style.opacity = random(0.6, 0.95);
      heartsArea.appendChild(heart);
      setTimeout(() => heart.remove(), 2800);
    }
    function startHearts() {
      if (heartTimer) return;
      spawnHeart();
      heartTimer = setInterval(spawnHeart, 650);
    }
    function stopHearts() {
      clearInterval(heartTimer);
      heartTimer = null;
      heartsArea.innerHTML = '';
    }
    // Close on background click/tap
    modal.addEventListener('click', e => {
      if (e.target === modal) closeLetter();
    });
    // Accessibility: close on Esc
    document.addEventListener('keydown', e => {
      if (modal.classList.contains('open') && e.key === 'Escape') {
        closeLetter();
      }
    });
  </script>
</body>
</html>
